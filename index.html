<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find a Verse</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        /* --- Themes --- */
        /* The body background color will now be controlled by these theme classes */
        .theme-light {
            background-color: #f3f4f6;
            color: #1f2937;
        }
        /* Main container background color for each theme */
        .theme-light #main-container { background-color: #ffffff; }
        .theme-light .text-gray-800 { color: #1f2937; }
        .theme-light .text-gray-500 { color: #6b7280; }
        .theme-light .bg-gray-100 { background-color: #f9fafb; }
        .theme-light input, .theme-light textarea { background-color: #ffffff; border-color: #d1d5db; color: #1f2937; }
        .theme-light input::placeholder, .theme-light textarea::placeholder { color: #9ca3af; }
        .theme-light .border-gray-300 { border-color: #d1d5db; }
        .theme-light .shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1-px rgba(0, 0, 0, 0.06); }
        
        .theme-dark {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        /* Main container background color for each theme */
        .theme-dark #main-container { background-color: #2d3748; }
        .theme-dark .bg-gray-100 { background-color: #4a5568; }
        .theme-dark .text-gray-800 { color: #e2e8f0; }
        .theme-dark .text-gray-500 { color: #a0aec0; }
        .theme-dark input, .theme-dark textarea { background-color: #4a5568; border-color: #4a5568; color: #e2e8f0; }
        .theme-dark input::placeholder, .theme-dark textarea::placeholder { color: #a0aec0; }
        .theme-dark .border-gray-300 { border-color: #4a5568; }
        .theme-dark .shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.12); }
        
        .theme-ocean {
            background-color: #e0f2fe;
            color: #0c4a6e;
        }
        /* Main container background color for each theme */
        .theme-ocean #main-container { background-color: #dbeafe; }
        .theme-ocean .bg-gray-100 { background-color: #eff6ff; }
        .theme-ocean .text-gray-800 { color: #0c4a6e; }
        .theme-ocean .text-gray-500 { color: #3b82f6; }
        .theme-ocean input, .theme-ocean textarea { background-color: #eff6ff; border-color: #93c5fd; color: #0c4a6e; }
        .theme-ocean input::placeholder, .theme-ocean textarea::placeholder { color: #93c5fd; }
        .theme-ocean .border-gray-300 { border-color: #93c5fd; }
        .theme-ocean .shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .theme-ocean .bg-blue-600 { background-color: #1d4ed8; }

        .theme-forest-green {
            background-color: #f0fdf4;
            color: #166534;
        }
        /* Main container background color for each theme */
        .theme-forest-green #main-container { background-color: #dcfce7; }
        .theme-forest-green .bg-gray-100 { background-color: #dcfce7; }
        .theme-forest-green .text-gray-800 { color: #166534; }
        .theme-forest-green .text-gray-500 { color: #4ade80; }
        .theme-forest-green input, .theme-forest-green textarea { background-color: #f0fdf4; border-color: #bbf7d0; color: #166534; }
        .theme-forest-green input::placeholder, .theme-forest-green textarea::placeholder { color: #bbf7d0; }
        .theme-forest-green .border-gray-300 { border-color: #bbf7d0; }
        .theme-forest-green .shadow-md { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        .theme-forest-green .bg-blue-600 { background-color: #15803d; }
        .theme-forest-green .text-blue-600 { color: #15803d; }
        
        .verse-card:hover {
            transform: scale(1.03);
        }

        /* Custom Fade-in Animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4 transition-colors duration-300 theme-light">
    <!-- Main Container -->
    <div id="main-container" class="w-full max-w-2xl rounded-2xl shadow-xl p-8 space-y-8 transition-colors duration-300">
        <!-- Header -->
        <header class="text-center space-y-2">
            <h1 class="text-5xl font-extrabold text-blue-600">Find a Verse</h1>
            <p class="text-gray-500">Get a verse that speaks to your heart.</p>
        </header>

        <!-- The Verse of the Day Section -->
        <section class="border-t border-gray-300 pt-6 space-y-4">
            <h2 class="text-xl font-bold text-gray-800">Verse of the Hour</h2>
            <div id="verse-of-day" class="p-6 bg-blue-500 text-white rounded-2xl shadow-md space-y-2 text-center transition-transform duration-300">
                <div id="votd-text" class="text-lg font-medium italic"></div>
                <div id="votd-reference" class="text-sm font-semibold"></div>
            </div>
        </section>

        <!-- Mood-Based Verses Section -->
        <section class="border-t border-gray-300 pt-6 space-y-4">
            <h2 class="text-xl font-bold text-gray-800">Find a Verse by Emotion</h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                <button data-emotion="joy" class="verse-card bg-green-400 text-white p-6 rounded-xl shadow-md font-bold text-center transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-md">Joy</button>
                <button data-emotion="peace" class="verse-card bg-purple-400 text-white p-6 rounded-xl shadow-md font-bold text-center transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-md">Peace</button>
                <button data-emotion="sadness" class="verse-card bg-blue-400 text-white p-6 rounded-xl shadow-md font-bold text-center transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-md">Sadness</button>
                <button data-emotion="fear" class="verse-card bg-orange-400 text-white p-6 rounded-xl shadow-md font-bold text-center transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-md">Fear</button>
                <button data-emotion="anger" class="verse-card bg-red-400 text-white p-6 rounded-xl shadow-md font-bold text-center transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-md">Anger</button>
                <button data-emotion="strength" class="verse-card bg-indigo-400 text-white p-6 rounded-xl shadow-md font-bold text-center transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-md">Strength</button>
                <button data-emotion="hope" class="verse-card bg-amber-500 text-white p-6 rounded-xl shadow-md font-bold text-center transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-md">Hope</button>
                <button data-emotion="gratitude" class="verse-card bg-pink-400 text-white p-6 rounded-xl shadow-md font-bold text-center transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-md">Gratitude</button>
                <button data-emotion="healing" class="verse-card bg-teal-400 text-white p-6 rounded-xl shadow-md font-bold text-center transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-md">Healing</button>
                <button data-emotion="patience" class="verse-card bg-cyan-500 text-white p-6 rounded-xl shadow-md font-bold text-center transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-md">Patience</button>
                <button data-emotion="forgiveness" class="verse-card bg-fuchsia-500 text-white p-6 rounded-xl shadow-md font-bold text-center transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-md">Forgiveness</button>
                <button data-emotion="guidance" class="verse-card bg-slate-500 text-white p-6 rounded-xl shadow-md font-bold text-center transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-lg active:translate-y-0 active:shadow-md">Guidance</button>
            </div>
            <div id="random-verse-container" class="mt-4">
                 <button id="random-verse-button" class="w-full bg-gray-300 text-gray-800 p-3 rounded-lg hover:bg-gray-400 transition-colors duration-300 font-bold shadow-md">Get a Random Verse</button>
            </div>
            <div id="verse-result" class="mt-4 p-6 bg-gray-100 rounded-2xl shadow-md space-y-2 hidden">
                <p id="result-text" class="text-gray-800 text-lg italic"></p>
                <p id="result-reference" class="text-gray-500 text-sm font-semibold text-right"></p>
                <div class="flex justify-between items-center pt-2">
                    <button id="save-verse-button" class="text-gray-500 hover:text-red-500 transition-colors duration-300 font-semibold text-sm">❤️ Save to Favorites</button>
                    <a id="bible-link" href="#" target="_blank" class="text-blue-600 hover:underline text-sm font-semibold">Read on Bible Gateway</a>
                </div>
            </div>
        </section>

        <!-- My Favorites Section -->
        <section id="favorites-section" class="border-t border-gray-300 pt-6 space-y-4 hidden">
            <h2 class="text-xl font-bold text-gray-800">My Favorite Verses</h2>
            <div id="favorites-list" class="space-y-4">
                <!-- Favorite verses will be dynamically added here -->
            </div>
            <div id="no-favorites-message" class="text-center text-gray-500 italic hidden">
                You haven't saved any favorite verses yet.
            </div>
        </section>

        <!-- Theme and Font Size Controls -->
        <section class="border-t border-gray-300 pt-6 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <span class="text-gray-800 font-semibold">Font Size:</span>
                <div class="flex items-center space-x-2">
                    <button id="font-decrease" class="p-2 w-8 h-8 flex justify-center items-center text-gray-500 rounded-full border border-gray-300 hover:bg-gray-200 transition-colors duration-300">-</button>
                    <button id="font-increase" class="p-2 w-8 h-8 flex justify-center items-center text-gray-500 rounded-full border border-gray-300 hover:bg-gray-200 transition-colors duration-300">+</button>
                </div>
            </div>
            <div class="flex flex-col items-end space-y-2" id="theme-controls">
                <span class="text-gray-800 font-semibold">Themes:</span>
                <div class="flex space-x-2">
                    <button data-theme="light" class="w-8 h-8 rounded-full bg-white border border-gray-300 hover:ring-2 hover:ring-blue-500 transition-all"></button>
                    <button data-theme="dark" class="w-8 h-8 rounded-full bg-gray-800 border border-gray-300 hover:ring-2 hover:ring-blue-500 transition-all"></button>
                    <button data-theme="ocean" class="w-8 h-8 rounded-full bg-blue-300 border border-gray-300 hover:ring-2 hover:ring-blue-500 transition-all"></button>
                    <button data-theme="forest-green" class="w-8 h-8 rounded-full bg-green-500 border border-gray-300 hover:ring-2 hover:ring-green-700 transition-all"></button>
                </div>
            </div>
        </section>
    </div>

    <script>
        // UI element references
        const mainContainer = document.getElementById('main-container');
        const verseOfDayText = document.getElementById('votd-text');
        const verseOfDayReference = document.getElementById('votd-reference');
        const verseResultContainer = document.getElementById('verse-result');
        const resultText = document.getElementById('result-text');
        const resultReference = document.getElementById('result-reference');
        const bibleLink = document.getElementById('bible-link');
        const themeControls = document.getElementById('theme-controls');
        const body = document.body;
        const fontIncreaseButton = document.getElementById('font-increase');
        const fontDecreaseButton = document.getElementById('font-decrease');
        const randomVerseButton = document.getElementById('random-verse-button');
        const saveVerseButton = document.getElementById('save-verse-button');
        const favoritesList = document.getElementById('favorites-list');
        const favoritesSection = document.getElementById('favorites-section');
        const noFavoritesMessage = document.getElementById('no-favorites-message');
        
        const THEMES = ['light', 'dark', 'ocean', 'forest-green'];

        // Verses data
        const verses = {
            joy: { text: "The Lord is my strength and my shield; in Him my heart trusts, and I am helped; my heart exults, and with my song I give thanks to Him.", reference: "Psalm 28:7" },
            peace: { text: "Peace I leave with you; my peace I give you. I do not give to you as the world gives. Do not let your hearts be troubled and do not be afraid.", reference: "John 14:27" },
            sadness: { text: "The Lord is close to the brokenhearted and saves those who are crushed in spirit.", reference: "Psalm 34:18" },
            fear: { text: "For God has not given us a spirit of fear, but of power and of love and of a sound mind.", reference: "2 Timothy 1:7" },
            anger: { text: "A fool gives full vent to his anger, but a wise man keeps himself under control.", reference: "Proverbs 29:11" },
            strength: { text: "I can do all things through him who strengthens me.", reference: "Philippians 4:13" },
            hope: { text: "May the God of hope fill you with all joy and peace as you trust in him, so that you may overflow with hope by the power of the Holy Spirit.", reference: "Romans 15:13" },
            gratitude: { text: "Give thanks in all circumstances; for this is God’s will for you in Christ Jesus.", reference: "1 Thessalonians 5:18" },
            healing: { text: "Heal me, O Lord, and I shall be healed; save me, and I shall be saved, for you are my praise.", reference: "Jeremiah 17:14" },
            patience: { text: "Be joyful in hope, patient in affliction, faithful in prayer.", reference: "Romans 12:12" },
            forgiveness: { text: "Bear with each other and forgive one another if any of you has a grievance against someone. Forgive as the Lord forgave you.", reference: "Colossians 3:13" },
            guidance: { text: "Trust in the Lord with all your heart and lean not on your own understanding; in all your ways submit to him, and he will make your paths straight.", reference: "Proverbs 3:5-6" }
        };

        // Theme management
        const applyTheme = (themeName) => {
            body.classList.remove(...THEMES.map(t => `theme-${t}`));
            body.classList.add(`theme-${themeName}`);
            body.dataset.theme = themeName;
        };

        // Display a verse with a fade-in animation and scroll to it
        const displayVerse = (verse) => {
            resultText.textContent = `“${verse.text}”`;
            resultReference.textContent = `— ${verse.reference}`;
            bibleLink.href = `https://www.biblegateway.com/passage/?search=${encodeURIComponent(verse.reference)}&version=NIV`;
            
            // Show and animate the verse container
            verseResultContainer.classList.remove('hidden');
            verseResultContainer.classList.remove('fade-in'); // Reset animation
            void verseResultContainer.offsetWidth; // Trigger reflow
            verseResultContainer.classList.add('fade-in');
            
            // Smoothly scroll to the verse
            verseResultContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        };

        // Display a verse that changes every hour
        const displayVerseOfTheHour = () => {
             const keys = Object.keys(verses);
             const hour = new Date().getHours();
             // Use the hour to get a predictable index that changes every hour
             const index = hour % keys.length;
             const selectedKey = keys[index];
             const verse = verses[selectedKey];
             verseOfDayText.textContent = `“${verse.text}”`;
             verseOfDayReference.textContent = `— ${verse.reference}`;
        };

        // Function to save a verse to local storage
        const saveVerse = (verse) => {
            let favorites = JSON.parse(localStorage.getItem('favoriteVerses')) || [];
            // Check if the verse is already in the list
            if (!favorites.some(fav => fav.text === verse.text)) {
                favorites.push(verse);
                localStorage.setItem('favoriteVerses', JSON.stringify(favorites));
                renderFavorites();
            }
        };

        // Function to remove a verse from local storage
        const removeVerse = (verseText) => {
            let favorites = JSON.parse(localStorage.getItem('favoriteVerses')) || [];
            favorites = favorites.filter(fav => fav.text !== verseText);
            localStorage.setItem('favoriteVerses', JSON.stringify(favorites));
            renderFavorites();
        };

        // Function to render favorite verses
        const renderFavorites = () => {
            const favorites = JSON.parse(localStorage.getItem('favoriteVerses')) || [];
            favoritesList.innerHTML = '';
            
            if (favorites.length === 0) {
                noFavoritesMessage.classList.remove('hidden');
                favoritesSection.classList.add('hidden');
            } else {
                noFavoritesMessage.classList.add('hidden');
                favoritesSection.classList.remove('hidden');
                favorites.forEach(verse => {
                    const favoriteCard = document.createElement('div');
                    favoriteCard.className = 'p-6 bg-gray-100 rounded-2xl shadow-md space-y-2';
                    favoriteCard.innerHTML = `
                        <p class="text-gray-800 text-lg italic">“${verse.text}”</p>
                        <div class="flex justify-between items-center">
                            <p class="text-gray-500 text-sm font-semibold">— ${verse.reference}</p>
                            <button class="remove-favorite-button text-red-400 hover:text-red-600 transition-colors duration-300 font-bold text-sm">Remove</button>
                        </div>
                    `;
                    favoritesList.appendChild(favoriteCard);
                    
                    favoriteCard.querySelector('.remove-favorite-button').addEventListener('click', () => {
                        removeVerse(verse.text);
                    });
                });
            }
        };

        // Event listeners
        document.querySelectorAll('.verse-card').forEach(button => {
            button.addEventListener('click', (e) => {
                const emotion = e.target.dataset.emotion;
                const verse = verses[emotion];
                if (verse) {
                    displayVerse(verse);
                }
            });
        });

        randomVerseButton.addEventListener('click', () => {
            const verseKeys = Object.keys(verses);
            const randomKey = verseKeys[Math.floor(Math.random() * verseKeys.length)];
            const randomVerse = verses[randomKey];
            displayVerse(randomVerse);
        });

        saveVerseButton.addEventListener('click', () => {
            const currentVerse = {
                text: resultText.textContent.replace(/[“”]/g, ''),
                reference: resultReference.textContent.replace('— ', '')
            };
            saveVerse(currentVerse);
        });

        themeControls.addEventListener('click', (e) => {
            const themeButton = e.target.closest('button');
            if (themeButton) {
                const theme = themeButton.dataset.theme;
                applyTheme(theme);
            }
        });

        fontIncreaseButton.addEventListener('click', () => {
            const currentSize = parseFloat(getComputedStyle(mainContainer).fontSize);
            mainContainer.style.fontSize = `${currentSize + 1}px`;
        });

        fontDecreaseButton.addEventListener('click', () => {
            const currentSize = parseFloat(getComputedStyle(mainContainer).fontSize);
            mainContainer.style.fontSize = `${currentSize - 1}px`;
        });

        // Initialize on page load
        window.onload = () => {
            displayVerseOfTheHour();
            renderFavorites();
        };
    </script>
</body>
</html>
